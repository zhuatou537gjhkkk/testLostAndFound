# 图片上传服务 - 测试用例

## 上传接口 (/upload)

| 用例ID            | 测试标题                             | 前置条件     | 操作步骤                                                     | 预期结果                                                     | 实际结果                                                     |
| :---------------- | :----------------------------------- | :----------- | :----------------------------------------------------------- | :----------------------------------------------------------- | ------------------------------------------------------------ |
| **TC-UPLOAD-001** | **成功上传合法的JPG图片**            | 服务正在运行 | 1. 使用Postman发送POST请求到`/upload`。<br>2. Body选择form-data。<br>3. KEY填`file`，类型选File。<br>4. 选择一个小于16MB的`.jpg`图片文件。<br>5. 发送请求。 | 1. HTTP状态码返回`201 Created`。<br>2. JSON响应体包含`message`和`url`字段。<br>3. `uploads`文件夹下出现新保存的图片文件。 | 1. HTTP状态码返回`201 Created`。<br/>2. JSON响应体包含`message`和`url`字段。<br/>3. `uploads`文件夹下出现新保存的图片文件。 |
| **TC-UPLOAD-002** | **失败-上传不被允许的文件类型(MOV)** | 服务正在运行 | 1. 同上，但在第4步选择一个`.MOV`文件。                       | 1. HTTP状态码返回`400 Bad Request`。<br>2. JSON响应体包含`error`字段，内容为“文件类型不被允许”。 | 1. HTTP状态码返回`400 Bad Request`。<br/>2. JSON响应体包含`error`字段，内容为“文件类型不被允许”。 |
| **TC-UPLOAD-003** | **失败-上传过大的文件**              | 服务正在运行 | 1. 同上，但在第4步选择一个大于16MB的图片。                   | 1. HTTP状态码返回`413 Payload Too Large`。                   | 1. HTTP状态码返回`413 Payload Too Large`。                   |
| **TC-UPLOAD-004** | **失败-请求体中不包含文件**          | 服务正在运行 | 1. 使用Postman发送POST请求到`/upload`。<br>2. Body选择form-data。<br>3. 不添加任何KEY-VALUE对，直接发送请求。 | 1. HTTP状态码返回`400 Bad Request`。<br>2. JSON响应体包含`error`字段，内容为“请求中没有文件部分”。 | 1. HTTP状态码返回`400 Bad Request`。<br/>2. JSON响应体包含`error`字段，内容为“请求中没有文件部分”。 |